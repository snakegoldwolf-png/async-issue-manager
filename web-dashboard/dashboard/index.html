<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoryonClaw Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --bg: #1a2e1a;
            --bg-accent: #243524;
            --card: #3a5a3a;
            --text: #e8f5e8;
            --muted: #90b090;
            --border: #4a6a4a;
            --accent: #ff9ecd;
            --ok: #7cb342;
            --warn: #ffb300;
        }
        * { font-family: 'VT323', monospace !important; }
        body { background: var(--bg); color: var(--text); min-height: 100vh; }
        .stat-card {
            background: var(--card);
            border: 3px solid var(--border);
            transition: transform 0.2s;
        }
        .stat-card:hover { transform: translateY(-2px); }
        .big-number { font-size: 3rem; line-height: 1; }
        @media (max-width: 640px) { .big-number { font-size: 2rem; } }
    </style>
</head>
<body class="p-6 md:p-12">
    <header class="mb-10 text-center">
        <h1 class="text-4xl md:text-5xl text-[var(--accent)]">ğŸ“Š LoryonClaw Dashboard</h1>
        <p class="text-[var(--muted)] mt-2">Token & API ä½¿ç”¨ç»Ÿè®¡</p>
        <p class="text-sm text-[var(--muted)]" id="updated"></p>
    </header>

    <main class="max-w-5xl mx-auto">
        <!-- LikeÂ·AI Stats -->
        <section class="mb-10">
            <h2 class="text-2xl text-[var(--accent)] mb-4">â˜ï¸ LikeÂ·AI API</h2>
            <div class="grid grid-cols-2 gap-4">
                <div class="stat-card rounded-lg p-6 text-center">
                    <div class="text-sm text-[var(--muted)] mb-2">API è¯·æ±‚æ•°</div>
                    <div class="big-number text-[var(--accent)]" id="api-requests">-</div>
                </div>
                <div class="stat-card rounded-lg p-6 text-center">
                    <div class="text-sm text-[var(--muted)] mb-2">API Token æ•°</div>
                    <div class="big-number text-[var(--ok)]" id="api-tokens">-</div>
                </div>
            </div>
        </section>

        <!-- Local Stats -->
        <section class="mb-10">
            <h2 class="text-2xl text-[var(--accent)] mb-4">ğŸ¤– æœ¬åœ° Agent ç»Ÿè®¡</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="stat-card rounded-lg p-6 text-center">
                    <div class="text-sm text-[var(--muted)] mb-2">æ€» Token æ•°</div>
                    <div class="big-number text-[var(--accent)]" id="local-tokens">-</div>
                </div>
                <div class="stat-card rounded-lg p-6 text-center">
                    <div class="text-sm text-[var(--muted)] mb-2">æ€»è¯·æ±‚æ•°</div>
                    <div class="big-number text-[var(--ok)]" id="local-requests">-</div>
                </div>
                <div class="stat-card rounded-lg p-6 text-center">
                    <div class="text-sm text-[var(--muted)] mb-2">Agent æ•°</div>
                    <div class="big-number text-[var(--warn)]" id="agents">-</div>
                </div>
                <div class="stat-card rounded-lg p-6 text-center">
                    <div class="text-sm text-[var(--muted)] mb-2">Session æ•°</div>
                    <div class="big-number text-[var(--text)]" id="sessions">-</div>
                </div>
            </div>
        </section>

        <!-- Links -->
        <section class="text-center">
            <a href="/issues" class="text-[var(--accent)] hover:underline text-xl">ğŸ“‹ æŸ¥çœ‹ Issues</a>
        </section>
    </main>

    <footer class="text-center text-[var(--muted)] text-sm mt-12">
        <p>LoryonClaw Â· æ•°æ®æ¯åˆ†é’Ÿåˆ·æ–°</p>
    </footer>

    <script>
        async function load() {
            try {
                const res = await fetch('./data.json?t=' + Date.now());
                const d = await res.json();
                document.getElementById('api-requests').textContent = d.requests || '-';
                document.getElementById('api-tokens').textContent = d.tokens || '-';
                document.getElementById('local-tokens').textContent = d.local_tokens || '-';
                document.getElementById('local-requests').textContent = d.local_requests || '-';
                document.getElementById('agents').textContent = d.agents || '-';
                document.getElementById('sessions').textContent = d.sessions || '-';
                if (d.updated) {
                    document.getElementById('updated').textContent = 'æ›´æ–°äº ' + d.updated;
                }
            } catch (e) {
                console.error(e);
            }
        }
        load();
        setInterval(load, 60000);
    </script>
</body>
</html>
